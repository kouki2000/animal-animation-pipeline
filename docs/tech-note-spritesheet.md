# 📝 技術ノート：スプライトシートの仕組み

> Month 0 Week 3 作成  
> 目的：Month 1 Week 2 のスプライトシート実装前に仕組みを把握する

---

## 1. 一言で言うと

**パラパラ漫画の1枚1枚の絵を、1枚の画像ファイルにまとめて並べたもの。**

---

## 2. 構造

```
┌────────────────────────────────────┐
│ [frame0] [frame1] [frame2] [frame3] │
│ [frame4] [frame5] [frame6] [frame7] │
└────────────────────────────────────┘
```

- 1つのマス = 1フレーム（パラパラ漫画の1ページ）
- 横・縦に規則正しく並んでいる（全マス同じサイズ）
- 再生時は「今どのマスを表示するか」を計算して切り出す

---

## 3. Flutter での切り出し計算

1フレームのサイズ = 幅100px × 高さ100px、列数 = 4 の場合：

```
フレーム番号 N を表示したいとき

列位置 = N % 列数        → X座標 = 列位置 × フレーム幅
行位置 = N ÷ 列数（整数） → Y座標 = 行位置 × フレーム高さ

例）N = 2 の場合
  列位置 = 2 % 4 = 2  → X = 2 × 100 = 200px
  行位置 = 2 ÷ 4 = 0  → Y = 0 × 100 = 0px

切り出す範囲 = Rect(left: 200, top: 0, width: 100, height: 100)
```

この `Rect` を `CustomPaint` に渡して描画する。

---

## 4. このプロジェクトでの位置づけ

- Month 1 Week 2 でスプライトシートを使ったパラパラアニメを実装する
- 素材は OpenGameArt から CC0 ライセンスのものを使用
- `Timer.periodic()` で 100ms ごとにフレーム番号を進める → パラパラ再生
- Week 3 以降で `AnimationController` に置き換えてなめらかにする

---

## 5. Lottie JSON との違い

| | スプライトシート | Lottie JSON |
|---|---|---|
| データ形式 | 画像ファイル（PNG等） | JSONテキスト |
| 拡大縮小 | 画質が落ちる（ラスター） | 落ちない（ベクター） |
| 用途 | Month 1の練習・プロトタイプ | Month 2以降の本番実装 |
| 自動生成 | しない | Pythonが生成する（最終ゴール） |

---

*作成: Month 0 Week 3 / 次に読むタイミング: Month 1 Week 2（スプライトシート実装前）*
